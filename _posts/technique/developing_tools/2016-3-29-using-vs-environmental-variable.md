---
layout: post
title: "Visual Studio中的环境变量使用实例：使用环境变量来组织工程"
category: tools
tags: [visual studio]
description: ""
---

# 前言 #

在前一篇文章中介绍了VS中的环境变量，本文将以实际例子说明如何合理使用这些环境变量来组织VC++工程。

# 使用vs环境变量来组织工程

通常一个解决方案包含多个项目，这些项目相互之间可能存在依赖关系，以下面这个解决方案为例：

<!--more-->

![my_soulution.jpg](http://7xi3zl.com1.z0.glb.clouddn.com/my_solution.jpg)

这个解决方案叫：CS.cpp, 包含了7个项目:

|*项目名*|*生成目标*|*描述*|
|:-------:|:----:|:----:|
|`Algorithm`|.exe|算法和数据结构实践|
|`c_language`|.exe|c语言实践|
|`TotalSTL`|.exe|STL实践|
|`TrainingGround`|.exe|C++语法自由训练场|
|`UnderstandingCpp11`|.exe|深入理解C++11代码实践|
|`gtest`|.lib|google c++单元测试框架，给其他几个项目作为测试框架|
|`util`|.lib|个人积累工具类，为其他几个项目提供util函数|

其中五个项目是生成.exe文件的应用程序，另外两个`gtest`和`util`是服务于其他五个项目的，它俩生成的是.lib库文件，来为其他五个项目链接使用。

下面介绍下我是如何把这7个项目组织起来协同工作，并且做到没有冗余文件。

**其实，组织项目很简单，仅需掌握C++程序构建的本质，两个阶段：编译和链接。**

## 第一步，让项目编译通过

这一步的目标是：让5个生成.exe的项目编译通过。以其中任意一个为例讲解，其他的与之类似。那么我就以TotalSTL为例吧，

先保证TotalSTL其内部代码没有语法错误，编译通过。

其次，因为代码中使用了gtest和util两个项目中的代码，因此需要确保TotalSTL项目能够搜索到gtest和util的头文件。很简单，把gtest和util的头文件所在目录放到TotalSTL项目的包含路径里即可，这一步在上一篇文章中已经提到，具体操作不必细说。

## 第二步：让项目链接通过

注意调整项目编译顺序。

假设，我现在要运行`TotalSTL`项目，现在介绍我是如何让它可以使用`gtest`和`util`这两个项目的。

## 组织目录和文件

对于一个VC++项目，常用的几个目录包括：

- 项目根目录、解决方案根目录

- 项目输出目录 : 编译链接结果文件存放目录

- 项目中间目录 : 编译链接过程中产生的临时文件保存目录

- 工程生成的文件通常或者是.exe或者是库文件。

---------------------------

**作者水平有限，对相关知识的理解和总结难免有错误，还望给予指正，非常感谢！**

**在这里也能看到这篇文章：[github博客](http://elloop.github.io), [CSDN博客](http://blog.csdn.net/elloop), 欢迎访问**

